#! @PYTHON@
# -*- coding: utf-8 -*-

import os, gtk
import gettext, locale

from classix import config, commandlineui, hildonui, gtkui

gtk.gdk.threads_init()

locale.setlocale(locale.LC_ALL, "")
# Setting the text domain for the locale module is important for gtk.Builder.
for module in gettext, locale:
    module.bindtextdomain('classix',config.localedir)
    module.textdomain('classix')

ui_file_name = os.path.join(config.pkgdatadir, "classix.ui")

try:
    import hildon
    hildon_loaded = True
except ImportError:
    hildon_loaded = False

if len(os.sys.argv) > 1:
    main_window = commandlineui.CommandLineInterface()
elif hildon_loaded:
    main_window = hildonui.HildonMainWindow(ui_file_name=ui_file_name)
else:
    main_window = gtkui.MainWindow(ui_file_name=ui_file_name)

main_window.run()
